#!/bin/sh

export XDIALOG_NO_GMSGS=1

# Pick a default available UI ...
if [[ -x "$(which Xdialog 2> /dev/null)" && -n "${DISPLAY}" ]]; then # Check for X, Xdialog
    declare DIALOG=$(which Xdialog) G=("100x75")
elif [[ -x "$(which dialog 2> /dev/null)" ]]; then # Check for dialog
    declare DIALOG=$(which dialog) G=( 0 0 )
fi

case ${1} in
    +|-) VOL=$(amixer sset Master "5dB${1}") ;;
    *[0-9]) VOL=$(amixer sset Master "${1}%") ;;
    *) printf "Usage: vol [+]|[-]|[0-100]\n" >&2 ; exit 1 ;;
esac

VOL=${VOL/\]*}; VOL=${VOL/*\[}

notify-send "Master: ${VOL}" || ${DIALOG} --title "Vol" --infobox "Master: ${VOL}" "${G[@]}" || echo "Master: ${VOL}"

# if [[ -n $DIALOG ]]; then
#     $DIALOG --title "Vol" --infobox "Master: ${VOL}" "${G[@]}"
# elif [[ $(command -v notify-send) ]] ; then
#     notify-send "Master: ${VOL}"
# else
#     echo "Master: ${VOL}"
# fi
