#!/bin/sh

export XDIALOG_NO_GMSGS=1

# Pick a default available UI ...
if [[ -x "$(which Xdialog 2> /dev/null)" && -n "${DISPLAY}" ]]; then # Check for X, Xdialog
    declare DIALOG=$(which Xdialog)
elif [[ -x "$(which dialog 2> /dev/null)" ]]; then # Check for dialog
    declare DIALOG=$(which dialog)
fi

case ${1} in
    +|-) VOL=$(amixer sset Master "5dB${1}"); VOL=${VOL/\]*}; VOL=${VOL/*\[}
         $DIALOG --title "Vol" --infobox ${VOL} 5 15 ;;
    *[0-9]) VOL=$(amixer sset Master "${1}%"); VOL=${VOL/\]*}; VOL=${VOL/*\[}
         $DIALOG --title "Vol" --infobox ${VOL} 5 15 ;;
    *) printf "Usage: vol [+]|[-]|[0-100]\n" >&2 ;;
esac
